# ===============================================
# PANE MODE - Pane Management (GREEN)
# ===============================================
# Activated with: Ctrl+g p
# Exit with: Escape

# Status should reflect pane mode
set -g status-right '#[fg=#1F1F28,bg=#98BC6D,bold] PANE #[fg=#DDD8BB,bg=#1F1F28] %H:%M #[fg=#363644]#[fg=#DDD8BB,bg=#363644] #[fg=#7EB3C9,bg=#363644]#[fg=#1F1F28,bg=#7EB3C9,bold] %d %b '

# Unbind all root bindings to prevent conflicts
unbind -T root -a

# Prevent input while in mode
select-pane -d
set-hook -g client-attached "select-pane -d"
set-hook -g client-focus-in "select-pane -d"
set-hook -g window-pane-changed "select-pane -d"
set-hook -g session-window-changed "select-pane -d"

# Mode switching (available in all modes)
bind -T root C-p run-shell "~/.config/tmux/scripts/return_to_normal.sh" \; source-file ~/.config/tmux/tmux.conf
bind -T root C-t source-file ~/.config/tmux/modes/window.conf
bind -T root C-s source-file ~/.config/tmux/modes/session.conf
bind -T root C-r source-file ~/.config/tmux/modes/resize.conf
bind -T root C-l source-file ~/.config/tmux/modes/locked.conf
bind -T root Escape run-shell "~/.config/tmux/scripts/return_to_normal.sh" \; source-file ~/.config/tmux/tmux.conf
bind -T root Enter run-shell "~/.config/tmux/scripts/return_to_normal.sh" \; source-file ~/.config/tmux/tmux.conf

# Pane creation (stays in pane mode)
bind -T root n split-window -h -c "#{pane_current_path}"
bind -T root d split-window -v -c "#{pane_current_path}"

# Pane management (stays in pane mode)
bind -T root x confirm-before -p "kill-pane? (y/n)" kill-pane
bind -T root f resize-pane -Z
bind -T root b break-pane

# Pane navigation (stays in pane mode)
bind -T root h select-pane -L
bind -T root j select-pane -D
bind -T root k select-pane -U
bind -T root l select-pane -R
bind -T root Tab select-pane -t :.+

# Pane swapping (stays in pane mode)
bind -T root J swap-pane -D
bind -T root K swap-pane -U

# Display pane numbers (stays in pane mode)
bind -T root q display-panes
